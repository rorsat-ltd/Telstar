{% extends "base.html" %}

{% block content %}

<style>
    .govuk-header--full-width-border {
        border-image: var(--test-card) 1;
    }
</style>


<div class="govuk-width-container app-width-container">
    <div class="govuk-phase-banner">
        <p class="govuk-phase-banner__content">
            <strong class="govuk-tag govuk-phase-banner__content__tag">
                Beta
            </strong>
            <span class="govuk-phase-banner__text">
                This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.
            </span>
        </p>
    </div>


<div class="govuk-width-container">
    <main class="govuk-main-wrapper">
        <h1 class="govuk-heading-xl">Test Card Generator</h1>
        <!-- lead paragraph -->
        <p class="govuk-body">Generate a test card!</p>
        <p class="govuk-body">Thanks to <a href="https://anze.dev" class="govuk-link">CraftByte</a> for providing the generator, this is a simple front-end.</p>

        <body>
            <form action="https://tpg.v0.si/index.html" method="get">
                <div class="govuk-form-group">
                    <label class="govuk-label" for="event-name">
                        Station
                    </label>
                    <input class="govuk-input govuk-!-width-three-quarters" name="station" id="station" type="text">
                </div>

                <div class="govuk-form-group">
                    <label class="govuk-label" for="program">
                        Program
                    </label>
                    <div id="program-hint" class="govuk-hint">
                        3 lines maximum.
                    </div>
                    <textarea class="govuk-textarea govuk-!-width-three-quarters" id="program" name="program" rows="3"
                        aria-describedby="more-detail-hint"></textarea>
                </div>

                <div class="govuk-form-group">
                    <label class="govuk-label" for="logo">
                        Logo Source
                    </label>
                    <div id="logo-hint" class="govuk-hint">
                        Can be a local or remote URL.
                    </div>
                    <input class="govuk-input govuk-!-width-three-quarters" name="logo" id="logo" type="text">
                </div>



                <div class="govuk-form-group">
                    <label class="govuk-label" for="song">
                        Song
                    </label>
                    <div id="location-hint" class="govuk-hint">
                        If there's no audio, please interact with the test card to trigger.
                    </div>
                    <select class="govuk-select" id="song" name="song">
                        <option value="resources/blits.ogg">BLITS</option>
                        <option value="resources/volvosong.flac" selected>VolvoSong</option>
                        <option value="resources/song.flac">Song</option>
                        <option value="resources/dnevnik.ogg">Dnevnik</option>
                        <option value="resources/synth.mp3">Synth</option>
                        <option value="resources/surge.mp3">Surge</option>
                        <option value="resources/aberdeen.mp3">Aberdeen</option>
                        <option value="resources/irishcoffee.mp3">IrishCoffee</option>
                        <option value="other">Custom</option>
                    </select>

                </div>
                <div class="govuk-checkboxes__conditional" id="custom-sound" style="display: none;">
                    <div class="govuk-form-group">
                        <label class="govuk-label" for="custom-sound">
                            Custom sound file (can be local or remote URL).
                        </label>
                        <input class="govuk-input govuk-!-width-one-third" id="custom-sound" name="custom-sound-url"
                            type="text">
                    </div>
                </div>




                <div class="govuk-form-group">
                    <label class="govuk-label" for="volume">
                        Volume
                    </label>
                    <div id="volume-hint" class="govuk-hint">
                        Please enter a value between 0 and 100.
                    </div>
                    <input class="govuk-input govuk-input--width-3 govuk-input--extra-letter-spacing" id="volume"
                        name="volume" type="number" min="0" max="100" step="5" value="50"
                        aria-describedby="volume-hint">
                </div>



                <div class="govuk-form-group">
                    <fieldset class="govuk-fieldset">
                        <legend class="govuk-fieldset__legend">
                            Time Options
                        </legend>
                        <div class="govuk-checkboxes" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                                <input class="govuk-checkboxes__input" id="millis" name="millis" type="checkbox">
                                <label class="govuk-label govuk-checkboxes__label" for="millis">
                                    Milliseconds
                                </label>
                            </div>
                            <div class="govuk-checkboxes__item">
                                <input class="govuk-checkboxes__input" id="utc" name="utc" type="checkbox">
                                <label class="govuk-label govuk-checkboxes__label" for="utc">
                                    UTC Hours
                                </label>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div id="buttons" class="govuk-button-group button-group-flex">
                    <button type="submit" class="govuk-button govuk-button--start" data-module="govuk-button">
                        Generate
                        <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5"
                            height="19" viewBox="0 0 33 40" aria-hidden="true" focusable="false">
                            <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z" />
                        </svg>
                    </button>
                    <button id="clear" type="reset" class="govuk-button govuk-button--secondary button-right"
                        data-module="govuk-button" onclick="clr()">
                        Clear
                    </button>
                </div>
            </form>
            <p class="govuk-body"><i>This will redirect you to <a href="https://tpg.v0.si/index.html" class="govuk-link">tpg.v0.si</a>. No tracking.</i></p>
    </main>
</div>

<script>
    document.getElementById("song").addEventListener("change", function () {
        var customSound = document.getElementById("custom-sound");
        if (this.value === "other") {
            customSound.style.display = "block";
        } else {
            customSound.style.display = "none";
        }
    });

    function clr() {
        document.getElementById("station").value = "";
        document.getElementById("program").value = "";
        document.getElementById("logo").value = "";
        document.getElementById("volume").value = "50";
        document.getElementById("song").value = "resources/volvosong.flac";
        document.getElementById("custom-sound").value = "";
        document.getElementById("custom-sound").style.display = "none";
        document.getElementById("millis").checked = false;
        document.getElementById("utc").checked = false;
    }



    function handleSongChange() {
        var songSelect = document.getElementById('song');
        var customSoundInput = document.getElementById('custom-sound');
        var customSoundUrlInput = document.getElementById('custom-sound-url');

        if (songSelect.value === 'other') {
            customSoundInput.style.display = 'block';
            customSoundUrlInput.value = songSelect.value;
        } else {
            customSoundInput.style.display = 'none';
            customSoundUrlInput.value = '';
        }
    }

</script>
{% endblock %}